#!/bin/bash

# cd shortcuts
alias ..='cd ..'
alias ...='cd ../..'
alias ....='cd ../../..'

# ls shortcuts
alias ls='\ls'
alias ll='\ls -lAh'
alias la='\ls -a'
alias l='\ls -al'
alias ld='ls -ld */' # List in long format, only directories

# tmux
alias tmux='TERM=screen-256color-bce tmux'
alias tnew='tmux new -s'
alias tlist='tmux ls'
alias tat='tmux attach -t'

# git shortcuts
alias ga='git add .'
alias gc='git commit -m'
alias wip='ga && gc "wip"'
alias gri='git rebase -i'
alias gr='git rebase'
alias gro='git rebase -X ours'
alias gfu='git fetch origin continuous; git rebase -i origin/continuous'
alias gco='git checkout'
alias gush='git push origin'
alias gull='git pull origin master'
alias gup='git checkout master && git pull origin master'
alias gs='git status -sb'
alias gp='git push'
alias got='git'
alias gut='git'
alias glog='git log --oneline --decorate'
alias commits='git shortlog -s -n'
alias gls="git log --graph --pretty=format:'%Cred%h%Creset -%Creset %s %Cgreen(%cr) %C(bold blue)<%an>%Creset' --abbrev-commit --date=relative -n 20"
alias grefl='git reflog --date=format:"%Y-%m-%d %H:%M:%S"'

#random
alias flush_memcached='echo "flush_all" | nc 127.0.0.1 11211'
alias mem='sudo htop --sort-key PERCENT_MEM'
# XXX: Breaks my nice git terminal colors
# alias grep="GREP_COLOR='10' grep -in --color=auto 2>/dev/null"
alias bup='source ~/.bash_profile'
alias bedit='subl ~/.bash_profile'
alias ttop='top -U $USER'
alias hosts='sudo subl /etc/hosts'
alias curl='curl -H "Content-Type: application/json"'
alias dot='cd $HOME/.dotfiles'

# Kubernetes
alias k='kubectl'
alias kc='kubectl config'

# docker
alias d='docker'
alias dc='docker-compose'
alias dcr='docker-compose stop && docker-compose rm -svf && docker-compose up --build'
alias drmi='docker rmi -f $(docker images -f "dangling=true" -q)'
alias dvol='docker volume rm $(docker volume ls -qf dangling=true)'
alias dclean='docker rmi -f $(docker images -f "dangling=true" -q); docker volume rm $(docker volume ls -qf dangling=true)'
alias dprune='docker system prune -a'

# python alias
alias p='python'
alias p3='python3'

# check internet connection
alias pingoo='ping -c 3 www.google.com'
if [ "$(uname)" != "Darwin" ]; then
  alias pbcopy="xclip -sel clip"
fi

# Recursively remove .DS_Store files
alias rmds_store='find . -type f -name '\*.DS_Store' -ls -delete'

# kafka
alias start_zookeeper='zookeeper-server-start /opt/homebrew/etc/kafka/zookeeper.properties'
alias start_kafkabroker='kafka-server-start /opt/homebrew/etc/kafka/server.properties'
alias list_kafkatopics='kafka-topics --list --bootstrap-server $KAFKA_ADDR'

# GCP
alias gauth='gcloud auth login && gcloud auth application-default login'

# JS/TS
alias n='pnpm'
alias nx='pnpm nx'
alias dlx='pnpm dlx'

alias reset_npm='override_alias npm npm'
alias npm='override_warning "pnpm" "reset_npm" && pnpm'

alias reset_npx='override_alias npx npx'
alias npx='override_warning "pnpm dlx" "reset_npx" && pnpm dlx'

alias tf='terraform'


alias ytaudio='yt-dlp -f "ba/bestaudio" -S "abr,acodec"   -x --audio-format m4a --audio-quality 0   --embed-metadata --embed-thumbnail --convert-thumbnails jpg   --split-chapters   --parse-metadata "title:(?P<artist>.+?)\s*[-â€“]\s*(?P<title>.+)"   -o "%(title)s.m4a"   --write-info-json --clean-info-json'


alias n8n='docker run -it --rm  --name n8n  -p 5678:5678  -e GENERIC_TIMEZONE="MST"  -e TZ="MST"  -e N8N_ENFORCE_SETTINGS_FILE_PERMISSIONS=true  -e N8N_RUNNERS_ENABLED=true  -e NODE_FUNCTION_ALLOW_EXTERNAL=* -e NODE_FUNCTION_ALLOW_BUILTIN=* -v n8n_data:/home/node/.n8n  docker.n8n.io/n8nio/n8n'
